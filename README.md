# HQEC – High Quality Expense Counter

## О проекте
HQEC представляет собой высокотехнологичный счётчик ваших доходов и расходов для их контроля. На данный момент проект находится в сырой стадии, но впереди много идей и функционала, которые будут реализованы в ближайшем будущем.

## Технологии
- **Язык программирования**: Golang
- **База данных**: SQLite (с использованием GORM)
    - В будущем возможна смена на PostgreSQL или MySQL.
- **Месседж-брокер**: Kafka
    - Пока не запущен, но полностью готов для использования.
- **Метрики**: Prometheus и Grafana
    - Два хэндлера метрик: на 8080 (строго необходимые метрики) и 9090 (дефолтные метрики).

## Идеи и планы
1. **Монолитная архитектура**:
    - Текущая модель показывает хорошие результаты при тестах на производительность. Переход на микросервисы не требуется.
2. **Grafana для графиков транзакций и баланса**:
    - Kafka будет запущен для этой функции.
3. **Интеграция с банками**:
    - Сбор и обработка транзакций для полуавтоматического учета.
4. **Контейнеризация**:
    - Docker будет внедрён в будущем.

## Описание API

### /registration {POST}
**Описание:** Регистрация нового пользователя.
- **Входные данные:**
  ```json
  {
    "login": "string",
    "password": "string"
  }
  ```
- **Логика:**
    1. Проверка на наличие логина в БД.
    2. При успешном завершении возвращается **200 OK**.

### /login {POST}
**Описание:** Логин пользователя.
- **Входные данные:**
  ```json
  {
    "login": "string",
    "password": "string"
  }
  ```
- **Логика:**
    1. Проверка валидности логина и пароля.
    2. При успешном завершении возвращается **Bearer JWT** и **200 OK**.

### /transactions {POST}
**Описание:** Добавление транзакции.
- **Входные данные:**
    - Bearer JWT в query параметре.
    - JSON с параметрами транзакции:
      ```json
      {
        "money": "float",
        "date": "string"
      }
      ```
- **Логика:**
    1. Проверка JWT на валидность.
    2. Добавление транзакции в БД.
    3. Возвращается **200 OK**.

### /transactions {GET}
**Описание:** Получение транзакций с фильтрацией.
- **Входные данные:**
    - Bearer JWT в query параметре.
    - JSON с фильтрами (необязательно):
      ```json
      {
        "startDate": "string",
        "endDate": "string",
        "money": "float",
        "page": "number",
        "perPage": "number"
      }
      ```
- **Логика:**
    1. Проверка JWT на валидность.
    2. Применение фильтров к транзакциям.
    3. Возвращается список транзакций в формате JSON и **200 OK**.

### /balance {GET}
**Описание:** Получение текущего баланса пользователя.
- **Входные данные:**
    - Bearer JWT в query параметре.
- **Логика:**
    1. Проверка JWT на валидность.
    2. Получение текущего баланса из БД.
    3. Возвращается баланс в виде числа и **200 OK**.

## Метрики и документация
### /metrics
- На порту **8080**: кастомные метрики для приложения.
- На порту **9090**: дефолтные метрики.

### /swagger
- Полная документация API доступна по этому эндпоинту.

